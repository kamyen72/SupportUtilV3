<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8" />
	<title>User Activity Listing</title>
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
	<script src="https://code.jquery.com/jquery-3.6.0.js"></script>
	<script src="https://code.jquery.com/ui/1.13.2/jquery-ui.js"></script>
	
	<style>
		.TitleText {
			text-align: center;
			font-weight: bolder;
			font-size: 40px;
			color: #ff0000; /* #5C5C5C; */
			text-shadow: -2px -2px 0px #333333, 1px 1px 0px #666666;
		}

		.tblhd {
			background: #ade3ef;
			font-weight: bolder;
		}

		#div_result {
			text-align: center;
			color: blue;
			font-size: 16px;
			padding-left: 700px;
			padding-top: 30px;
		}

		td {
			padding-left: 5px;
			padding-right: 5px;
		}

		.servertitle {
			font-size: 18px;
			font-weight: bold;
			color: blue;
		}
	</style>

	<script>
		function GetMenuRoots() {
            var txt = "";
            let mx = 0;
            let totalleft = 0;

            let bttxt = "";

            let txt3 = "";
            let mx2 = 0;

			$.ajax({
				type: "POST",
				url: "/API/GetRoots",
				data: JSON.stringify({ "InputText": "" }),
				contentType: "application/json; charset=utf-8",
				dataType: "json",
				success: function (response) {
					document.getElementById("menuRootsJson").innerText = JSON.stringify(response);
					let mx = response.length;
					alert(mx);
					document.getElementById("txtRoots").innerText = response.length.toString();
                    alert(document.getElementById("txtRoots").innerText);
					for (let i = 0; i < mx; i++) {

						var thisitem = response[i];

						if (i == 0) {
							totalleft = 17;
						}
						else {
							totalleft = totalleft + 210;
						}

						txt = txt + "<label style='opacity: 0; background: red; padding-left: 5px; position: block;'></label>";
						txt = txt + "<button id='root-" + i + "' style='padding: 5px;border-radius: 15px; font-size:20px; font-weight:bold; position: block;width:200px;' data-menurootid=" + thisitem.menurootid + " width='100px;'>" + thisitem.text + "</button>";

						var bodyRect = document.getElementById("menubar").getBoundingClientRect();

						//alert("calling " + JSON.stringify({ "InputText": thisitem.menurootid.toString() }));
						txt3 = txt3 + "<div style='padding: 10px 5px 5px 5px;border-radius:15px;opacity:1;position:absolute;width:200px;height:300px;background:blue;display:block;top:45px;left:" + totalleft + "px;'>";

						for (let z = 0; z < 3; z++) {
							txt3 = txt3 + "<button style='width:190px;background:green;color:white;'>" + (z + 1) + "</button>";
						}
						txt3 = txt3 + "</div>";
					}
                    
                    txt = txt + txt3;
					$("#menubar").html(txt);
                    $("#menuitems").text(txt);
				},
				failure: function (response) {
				},
				error: function (response, status) {
				}
			});

            
		}
	</script>

	<script>
		function test() {
			//GetMenuRoots();
			//var rootsjson = JSON.parse(document.getElementById("menuRootsJson").innerText);
            alert("after conversion: " + document.getElementById("menuRootsJson").innerText);
		}
	</script>

	<script>
		function GetRootItems(myRootID) {
            $.ajax({
                type: "POST",
                url: "/API/GetRootItems",
                data: JSON.stringify({ "InputText": "" }),
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function (response) {
                    let mx = response.length;
                    alert(mx);
                    document.getElementById("txtRootItems").innerText = myRootID.toString();
                    alert(document.getElementById("txtRootItems").innerText);
                    for (let i = 0; i < mx; i++) {

                        var thisitem = response[i];

                        if (i == 0) {
                            totalleft = 17;
                        }
                        else {
                            totalleft = totalleft + 210;
                        }

                        txt = txt + "<label style='opacity: 0; background: red; padding-left: 5px; position: block;'></label>";
                        txt = txt + "<button id='root-" + i + "' style='padding: 5px;border-radius: 15px; font-size:20px; font-weight:bold; position: block;width:200px;' data-menurootid=" + thisitem.menurootid + " width='100px;'>" + thisitem.text + "</button>";

                        var bodyRect = document.getElementById("menubar").getBoundingClientRect();

                        //alert("calling " + JSON.stringify({ "InputText": thisitem.menurootid.toString() }));
                        txt3 = txt3 + "<div style='padding: 10px 5px 5px 5px;border-radius:15px;opacity:1;position:absolute;width:200px;height:300px;background:blue;display:block;top:45px;left:" + totalleft + "px;'>";

                        for (let z = 0; z < 3; z++) {
                            txt3 = txt3 + "<button style='width:190px;background:green;color:white;'>" + (z + 1) + "</button>";
                        }
                        txt3 = txt3 + "</div>";
                    }

                    txt = txt + txt3;
                    $("#menubar").html(txt);
                    $("#menuitems").text(txt);
                },
                failure: function (response) {
                },
                error: function (response, status) {
                }
            });
		}
	</script>
</head>
<body>
	<div id="mainDiv" class="container-fluid">
		<div class="row">
			<div class="col-sm-12 col-md-12" style="text-align:center;">
				<span class="TitleText">Menu Testing</span>
			</div>
		</div>
		<div class="row">
			<div class="col-sm-12 col-md-12" style="text-align:center;">
				<button onclick="GetMenuRoots()" style="font-size:26px;background:red;color:white;font-weight:bold;">Get Menu Roots</button>
				<button onclick="test()">Test count</button>
			</div>
		</div>
		<div class="row">
			<div id="menubar" class="col-sm-12 col-md-12">
			</div>
		</div>
	</div>
	<div id="secret" style="display:block;position:absolute;top:700px;border-style:solid;border-width:3px;" class="row">
		<div class="col-sm-12 col-md-12">
			<div id="menuitems" style="display:block;>..</div>
			<div id="txtRootItems"></div>
			<div id="txtRoots"></div>
			<div id="menuRootsJson"></div>
		</div>
	</div>
</body>
</html>